# ════════════════════════════════════════════════════════════════════════════
# Kedro Data Catalog for PERFECT Phase 2 - MODERN KEDRO (>= 0.18.0)
# Uses updated dataset type names
# ════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# PHASE 1: DATA LOADING
# ─────────────────────────────────────────────────────────────────────────────

raw_data:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/01_raw/data.csv
  load_args:
    engine: python

# ─────────────────────────────────────────────────────────────────────────────
# PHASE 1: DATA VALIDATION (Outputs)
# ─────────────────────────────────────────────────────────────────────────────

validated_data:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/02_intermediate/validated_data.csv
  save_args:
    index: false

validation_report:
  type: pickle.pickle_dataset.PickleDataSet
  filepath: data/08_reporting/validation_report.pkl

# ─────────────────────────────────────────────────────────────────────────────
# PHASE 1: DATA CLEANING (Outputs)
# ─────────────────────────────────────────────────────────────────────────────

cleaned_data:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/02_intermediate/cleaned_data.csv
  save_args:
    index: false

# ─────────────────────────────────────────────────────────────────────────────
# PHASE 2: FEATURE ENGINEERING (Data Loading & Splitting)
# ─────────────────────────────────────────────────────────────────────────────

X_train_raw:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/X_train_raw.csv
  save_args:
    index: false

X_test_raw:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/X_test_raw.csv
  save_args:
    index: false

y_train:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/y_train.csv
  save_args:
    index: false

y_test:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/y_test.csv
  save_args:
    index: false

# Split configuration (CRITICAL for Gap 1: Data Leakage Prevention)
train_test_split_config:
  type: pickle.pickle_dataset.PickleDataSet
  filepath: data/08_reporting/train_test_split_config.pkl

# ─────────────────────────────────────────────────────────────────────────────
# PHASE 2: FEATURE ENGINEERING (Processing & Outputs)
# ─────────────────────────────────────────────────────────────────────────────

X_train_imputed:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/X_train_imputed.csv
  save_args:
    index: false

X_test_imputed:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/X_test_imputed.csv
  save_args:
    index: false

X_train_scaled:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/X_train_scaled.csv
  save_args:
    index: false

X_test_scaled:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/X_test_scaled.csv
  save_args:
    index: false

X_train_encoded:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/X_train_encoded.csv
  save_args:
    index: false

X_test_encoded:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/X_test_encoded.csv
  save_args:
    index: false

X_train_engineered:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/X_train_engineered.csv
  save_args:
    index: false

X_test_engineered:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/X_test_engineered.csv
  save_args:
    index: false

# ─────────────────────────────────────────────────────────────────────────────
# PHASE 2: FEATURE ENGINEERING (Fitted Preprocessors - Gap 1 Critical!)
# ─────────────────────────────────────────────────────────────────────────────

imputer_config:
  type: pickle.pickle_dataset.PickleDataSet
  filepath: data/06_models/imputer.pkl

scaler_config:
  type: pickle.pickle_dataset.PickleDataSet
  filepath: data/06_models/scaler.pkl

encoder_config:
  type: pickle.pickle_dataset.PickleDataSet
  filepath: data/06_models/encoder.pkl

# ─────────────────────────────────────────────────────────────────────────────
# PHASE 2: FEATURE SELECTION (Gap 2 & Gap 5)
# ─────────────────────────────────────────────────────────────────────────────

X_train_selected:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/X_train_selected.csv
  save_args:
    index: false

X_test_selected:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/03_primary/X_test_selected.csv
  save_args:
    index: false

feature_importance:
  type: pandas.csv_dataset.CSVDataSet
  filepath: data/08_reporting/feature_importance.csv
  save_args:
    index: false

selected_features:
  type: pickle.pickle_dataset.PickleDataSet
  filepath: data/08_reporting/selected_features.pkl

# ─────────────────────────────────────────────────────────────────────────────
# PROBLEM TYPE DETECTION (Gap 2)
# ─────────────────────────────────────────────────────────────────────────────

problem_type_result:
  type: pickle.pickle_dataset.PickleDataSet
  filepath: data/08_reporting/problem_type_result.pkl

# ─────────────────────────────────────────────────────────────────────────────
# PHASE 1 PIPELINE: Reporting
# ─────────────────────────────────────────────────────────────────────────────

data_summary:
  type: pickle.pickle_dataset.PickleDataSet
  filepath: data/08_reporting/data_summary.pkl